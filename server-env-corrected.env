##############################
# Supabase Self-Hosting ENV
# CONFIGURACIÓN CORREGIDA PARA REDIRECCIÓN DE EMAILS
##############################

############
# Secrets
############
POSTGRES_PASSWORD=7fe76914eb0d6e479584db3393398262
JWT_SECRET=dfa2d62819e8682e5c35d651d7173c382e0f06a6
ANON_KEY=eyJ0eXAiOiAiSldUIiwiYWxnIjogIkhTMjU2In0.ewogICJyb2xlIjogImFub24iLAogICJpc3MiOiAic3VwYWJhc2UiLAogICJpYXQiOiAxNzU4NzAwNTMzLAogICJleHAiOiAxOTE2MzgwNTMzCn0.uhOFMEExih6oXgd9tDGK87L-xQMK6J-6w5oPDs2tnbc
SERVICE_ROLE_KEY=eyJ0eXAiOiAiSldUIiwiYWxnIjogIkhTMjU2In0.ewogICJyb2xlIjogInNlcnZpY2Vfcm9sZSIsCiAgImlzcyI6ICJzdXBhYmFzZSIsCiAgImlhdCI6IDE3NTg3MDA1MzMsCiAgImV4cCI6IDE5MTYzODA1MzMKfQ.eHSEPobJlAbZrtdqPJLsG9rxtgaYIj8Gi4PItLSBjLE
DASHBOARD_USERNAME=Javier
DASHBOARD_PASSWORD=Victoria2023
SECRET_KEY_BASE=962bc2f024a1fa94df7917f68b22bd92f00767112ee0ca7c1be36b6e6177528d
VAULT_ENC_KEY=83e864ada3de06b12a809b4afab3da08

############
# Database
############
POSTGRES_HOST=db
POSTGRES_DB=postgres
POSTGRES_PORT=5432

############
# Supavisor (Connection Pooler)
############
POOLER_PROXY_PORT_TRANSACTION=6543
POOLER_DEFAULT_POOL_SIZE=20
POOLER_MAX_CLIENT_CONN=100
POOLER_TENANT_ID=your-tenant-id
POOLER_DB_POOL_SIZE=5

############
# API Proxy (Kong)
############
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

############
# PostgREST
############
PGRST_DB_SCHEMAS=public,storage,graphql_public

############
# Auth (GoTrue) - CONFIGURACIÓN CORREGIDA
############

# ✅ CONFIGURACIÓN CORRECTA SEGÚN DOCUMENTACIÓN OFICIAL
SITE_URL=https://lacasadelsueloradiante.es
API_EXTERNAL_URL=https://supabase.lacasadelsueloradianteapp.com/goapi
JWT_EXPIRY=3600
DISABLE_SIGNUP=false

# ✅ URLs PERMITIDAS PARA REDIRECCIÓN (VARIABLE OFICIAL)
# Incluye todas las rutas donde el usuario puede ser redirigido
ADDITIONAL_REDIRECT_URLS=https://lacasadelsueloradiante.es/**,https://lacasadelsueloradiante.es/auth/**,https://lacasadelsueloradiante.es/auth/reset-password

# ✅ CONFIGURACIÓN DE EMAIL Y AUTH
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true
ENABLE_ANONYMOUS_USERS=false

# ✅ CONFIGURACIÓN DE TELÉFONO
ENABLE_PHONE_SIGNUP=true
ENABLE_PHONE_AUTOCONFIRM=true

# ✅ CONFIGURACIÓN SMTP (CORRECTO)
SMTP_HOST=mail.lacasadelsueloradiante.es
SMTP_PORT=587
SMTP_USER=consultas@lacasadelsueloradiante.es
SMTP_PASS=Limpiezas-2024
SMTP_ADMIN_EMAIL=consultas@lacasadelsueloradiante.es
SMTP_SENDER_NAME=La Casa del Suelo Radiante

# ✅ RUTAS DE EMAIL TEMPLATES (CONFIGURACIÓN OFICIAL)
# Estas son las rutas que aparecerán en los emails
MAILER_URLPATHS_INVITE=/auth/v1/verify
MAILER_URLPATHS_CONFIRMATION=/auth/v1/verify
MAILER_URLPATHS_RECOVERY=/auth/reset-password
MAILER_URLPATHS_EMAIL_CHANGE=/auth/v1/verify

# ✅ TEMPLATES PERSONALIZADOS DE EMAIL
# URLs a templates HTML personalizados (opcional)
# Opción 1: Con templates personalizados (requiere nginx configurado)
MAILER_TEMPLATES_INVITE=https://lacasadelsueloradiante.es/email-templates/invite-template.html
MAILER_TEMPLATES_CONFIRMATION=https://lacasadelsueloradiante.es/email-templates/confirmation-template.html
MAILER_TEMPLATES_RECOVERY=https://lacasadelsueloradiante.es/email-templates/recovery-template.html
MAILER_TEMPLATES_MAGIC_LINK=https://lacasadelsueloradiante.es/email-templates/recovery-template.html
MAILER_TEMPLATES_EMAIL_CHANGE=

# Opción 2: Sin templates personalizados (solo sujetos personalizados)
# MAILER_TEMPLATES_INVITE=
# MAILER_TEMPLATES_CONFIRMATION=
# MAILER_TEMPLATES_RECOVERY=
# MAILER_TEMPLATES_MAGIC_LINK=
# MAILER_TEMPLATES_EMAIL_CHANGE=

# ✅ SUJETOS DE EMAIL PERSONALIZADOS
MAILER_SUBJECTS_INVITE=Te han invitado a La Casa del Suelo Radiante
MAILER_SUBJECTS_CONFIRMATION=Confirma tu registro en La Casa del Suelo Radiante
MAILER_SUBJECTS_RECOVERY=Recupera tu contraseña - La Casa del Suelo Radiante
MAILER_SUBJECTS_MAGIC_LINK=Tu enlace de acceso - La Casa del Suelo Radiante
MAILER_SUBJECTS_EMAIL_CHANGE=Confirma el cambio de email - La Casa del Suelo Radiante

# ✅ NOTIFICACIONES DE CAMBIOS (OPCIONAL)
MAILER_SUBJECTS_PASSWORD_CHANGED_NOTIFICATION=Tu contraseña ha sido cambiada
MAILER_SUBJECTS_EMAIL_CHANGED_NOTIFICATION=Tu email ha sido cambiado
GOTRUE_MAILER_NOTIFICATIONS_PASSWORD_CHANGED_ENABLED=true
GOTRUE_MAILER_NOTIFICATIONS_EMAIL_CHANGED_ENABLED=true

# ❌ ELIMINAR ESTAS VARIABLES (NO EXISTEN EN GOTRUE):
# GOTRUE_EXTERNAL_REDIRECT_ENABLED=true
# GOTRUE_MAILER_AUTOCONFIRM_REDIRECTS=true

############
# Studio (Dashboard)
############
STUDIO_DEFAULT_ORGANIZATION=Default Organization
STUDIO_DEFAULT_PROJECT=Default Project
STUDIO_PORT=3000
SUPABASE_PUBLIC_URL=https://supabase.lacasadelsueloradianteapp.com

############
# IMGProxy
############
IMGPROXY_ENABLE_WEBP_DETECTION=true

############
# OpenAI Assistant (optional)
############
OPENAI_API_KEY=

############
# Functions
############
FUNCTIONS_VERIFY_JWT=false

############
# Logs / Analytics
############
LOGFLARE_PUBLIC_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-public
LOGFLARE_PRIVATE_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-private
DOCKER_SOCKET_LOCATION=/var/run/docker.sock
GOOGLE_PROJECT_ID=GOOGLE_PROJECT_ID
GOOGLE_PROJECT_NUMBER=GOOGLE_PROJECT_NUMBER

############
# Storage
############
TENANT_ID=stub
GLOBAL_S3_BUCKET=stub
REGION=stub
S3_PROTOCOL_ACCESS_KEY_ID=b9c4c8439c219e9de53ddf2d79a3b543
S3_PROTOCOL_ACCESS_KEY_SECRET=bb418c7b074a7de178a69d0fb93808739e0eab65427e78904f5cfeb874b98880
S3_PROTOCOL_PREFIX=/storage/v1
MINIO_ROOT_USER=supa-storage
MINIO_ROOT_PASSWORD=secret1234